{% extends "blog/base.html" %}
{% load static %}

{% block title %}{{ post.title }}{% endblock %}

{% block page_content %}

<div class="post-detail-container">
    <!-- Post Header Card (Project Card Style) -->
    <article class="project-card post-header-card">
        <!-- Featured Image -->
        <div class="project-image">
            {% if post.featured_image %}
                <img src="{{ post.featured_image.url }}" alt="{{ post.title }}">
            {% else %}
                ðŸ“„
            {% endif %}
        </div>

        <!-- Post Info Content -->
        <div class="project-content">
            <h3>{{ post.title }}</h3>
            <p>{{ post.excerpt|default:post.content|truncatewords:10 }}</p>

            <!-- Post Meta with Tech Stack Style -->
            <div class="tech-stack post-meta-tags">
                <span class="tech-tag">
                    <i class="fas fa-user"></i>
                    {{ post.author.get_full_name|default:post.author.username }}
                </span>
                <span class="tech-tag">
                    <i class="fas fa-calendar"></i>
                    {{ post.created_at|date:"d M Y" }}
                </span>
                <span class="tech-tag">
                    <i class="fas fa-tag"></i>
                    <a href="{% url 'blog:category' post.category.slug %}">{{ post.category.name }}</a>
                </span>
                {% if post.updated_at != post.created_at %}
                {% endif %}
            </div>
        </div>
    </article>

    <!-- Comments Section with portfolio styling -->
    <section class="comments-section-improved">
        <h2 class="section-title">ðŸ’¬ Comentarios ({{ comments.count }})</h2>
        
        <div class="comments-container">
            {% for comment in comments %}
            <div class="info-card comment-card">
                <div class="comment-header">
                    <h3>ðŸ‘¤ {{ comment.author }}</h3>
                    <p style="color: var(--text-light);">
                        <i class="fas fa-clock"></i>
                        {{ comment.created_at|date:"d M Y - H:i" }}
                    </p>
                </div>
                <div class="comment-body">
                    {{ comment.content|linebreaks }}
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Comment Form with portfolio styling -->
        <div class="contact-container" >
            <div class="contact-info">
                <form method="post" class="comment-form-improved">
                    {% csrf_token %}
                    <div class="info-grid">
                        <div class="info-card">
                            <h4>Nombre *</h4>
                            <input type="text" name="author" required >
                        </div>
                        <div class="info-card">
                            <h4>Email *</h4>
                            <input type="email" name="email" required>
                        </div>
                    </div>
                    <div class="info-card" >
                        <h4>Comentario *</h4>
                        <textarea name="content" rows="5" required placeholder="Escribe crack..." ></textarea>
                    </div>
                    <div class="hero-buttons">
                        <button type="submit" class="cta-button">
                            <i class="fas fa-paper-plane"></i> Publicar Comentario
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <div style="text-align: center; margin-top: 4rem;">
        <div class="hero-buttons">
            <a href="{% url 'blog:index' %}" class="cta-button">
                <i class="fas fa-arrow-left"></i> Todos los Posts
            </a>
            <a href="{% url 'core:home' %}" class="cta-button">
                <i class="fas fa-home"></i> Inicio
            </a>
        </div>
    </div>
</div>
{% endblock %}